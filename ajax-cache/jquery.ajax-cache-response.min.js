/**
 * Request Storage v1.0
 *  
 * Copyright (c) 2010 Adam Ayres 
 */
var requestStorage=function(){var c={};var d=[];return{length:0,key:function(n){return d.length>=n?d[n-1]:null},getItem:function(a){return c.hasOwnProperty(a)?c[a]:null},setItem:function(a,b){if(!c.hasOwnProperty(a)){this["length"]++}c[a]=b;d.push(a)},removeItem:function(a){if(c.hasOwnProperty(a)){this["length"]--;for(var i=0;i<d.length;i++){if(d[i]==a){d.splice[i,1]}}}delete c[a]},clear:function(){c={};d=[]}}}();

/**
 * jQuery Ajax Cache Response v1.0
 *  
 * Copyright (c) 2010 Adam Ayres 
 */
(function(d){var b={timeStamp:"__timeStamp__",responseText:"__responseText__",hasResponseXML:"__hasResponseXML__",responseHeaders:"__responseHeaders__"};d.ajaxCacheResponse={storage:window.requestStorage};var c=function(g){var h="";for(var f in g){var e=typeof g[f];if(e==="string"||e==="number"||e==="boolean"){h+=f+"="+g[f]+","}else{if(e==="object"){h+=f+"="+d.param(g[f])+","}else{if(e==="array"){d.each(g[f],function(i,j){h+=c(j)})}}}}return h};var a=function(i,f){if(d.ajaxCacheResponse.storage.getItem(i+b.timeStamp)===null){return false}var h=true;if(typeof f.cacheResponseTimer=="number"){var e=d.ajaxCacheResponse.storage.getItem(i+b.timeStamp);var g=new Date().getTime();h=e+f.cacheResponseTimer>g;if(h===true){f.cacheTimeRemaining=f.cacheResponseTimer-(g-e)}}if(d.isFunction(f.cacheResponseValid)){h=f.cacheResponseValid.call(this,f)}return h};d.ajaxPrefilter(function(e,j,f){if(e.cacheResponse===true){if(d.ajaxCacheResponse.storage===undefined){throw"No valid storage defined for the Ajax Cache Response plugin"}var i=c(j);e.cacheResponseId=i;if(a(i,e)===true){var g=d.extend({},b);for(var h in g){g[h]=d.ajaxCacheResponse.storage.getItem(i+g[h])}e.xhr=function(){return{open:d.noop,setRequestHeader:d.noop,send:d.noop,abort:d.noop,onreadystatechange:d.noop,getResponseHeader:d.noop,getAllResponseHeaders:function(){return g.responseHeaders},readyState:4,status:200,statusText:"success",responseText:g.responseText,responseXML:(g.hasResponseXML===true)?d.parseXML(g.responseText):undefined}};f.responseFromCache=true;f.cacheTimeRemaining=e.cacheTimeRemaining}else{f.responseFromCache=false}}});d(document).ajaxSuccess(function(g,f,e,h){if(e.cacheResponse===true){var i=e.cacheResponseId;if(a(i,e)===false){var j=d.ajaxCacheResponse.storage;j.setItem(i+b.responseText,f.responseText);j.setItem(i+b.responseHeaders,f.getAllResponseHeaders());j.setItem(i+b.timeStamp,new Date().getTime());j.setItem(i+b.hasResponseXML,f.responseXML!==undefined)}}})})(jQuery);